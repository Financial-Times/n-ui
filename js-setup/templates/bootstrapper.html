{{#if @root.flags.javascript}}
<script>
	window.nextFeatureFlags = {{{json @root.flagsArray}}};
	{{#if @root.nUiConfig}}
		window.ftNextUiConfig = {{{json @root.nUiConfig}}};
	{{/if}}
	{{#if anon}}window.nextIsAnonymous = {{anon.userIsAnonymous}};{{/if}}

	window.ftNextLoadScript = function (src) {
		var d = document, o = d.createElement('script');
		o.async = o.defer = true;
		o.src = src;
		var s = d.getElementsByTagName('script')[0];
		s.parentNode.insertBefore(o, s.nextSibling);
		return o;
	};

	window.ftNextFireCondition = function (condition) {
		var evName = 'ftNext' + condition;
		if (!window[evName]) {
			var ev = new CustomEvent(evName);
			document.dispatchEvent(ev);
			window[evName] = 1;
		}
	};

	{{>n-ui/layout/partials/css-loader}}

	window.{{@root.polyfillCallbackName}} = function () {
		window.ftNextFireCondition('PolyfillLoaded');
	};

	(function () {
		if (cutsTheMustard) {
			{{#each @root.javascriptBundles}}
				ftNextLoadScript('{{{this}}}');
			{{/each}}
		} else {
			ftNextLoadScript('{{{@root.polyfillUrls.core}}}');
		}
	})();

	{{#if @root.flags.speedcurveLUX}}
		LUX=(function(){var a=("undefined"!==typeof(LUX)&&"undefined"!==typeof(LUX.gaMarks)?LUX.gaMarks:[]);var d=("undefined"!==typeof(LUX)&&"undefined"!==typeof(LUX.gaMeasures)?LUX.gaMeasures:[]);var h="LUX_start";var j=window.performance;var k=("undefined"!==typeof(LUX)&&LUX.ns?LUX.ns:(Date.now?Date.now():+(new Date())));if(j&&j.timing&&j.timing.navigationStart){k=j.timing.navigationStart}function e(){if(j){if(j.now){return j.now()}else{if(j.webkitNow){return j.now()}else{if(j.msNow){return j.now()}else{if(j.mozNow){return j.now()}}}}}var m=Date.now?Date.now():+(new Date());return m-k}function b(m){if(j){if(j.mark){return j.mark(m)}else{if(j.webkitMark){return j.webkitMark(m)}}}a.push({name:m,entryType:"mark",startTime:e(),duration:0});return}function l(o,s,m){if("undefined"===typeof(s)&&g(h)){s=h}if(j){if(j.measure){if(s){if(m){return j.measure(o,s,m)}else{return j.measure(o,s)}}else{return j.measure(o)}}else{if(j.webkitMeasure){return j.webkitMeasure(o,s,m)}}}var q=0,n=e();if(s){var r=g(s);if(r){q=r.startTime}else{if(j&&j.timing&&j.timing[s]){q=j.timing[s]-j.timing.navigationStart}else{return}}}if(m){var p=g(m);if(p){n=p.startTime}else{if(j&&j.timing&&j.timing[m]){n=j.timing[m]-j.timing.navigationStart}else{return}}}d.push({name:o,entryType:"measure",startTime:q,duration:(n-q)});return}function g(m){return c(m,f())}function c(p,o){for(i=o.length-1;i>=0;i--){var n=o[i];if(p===n.name){return n}}return undefined}function f(){if(j){if(j.getEntriesByType){return j.getEntriesByType("mark")}else{if(j.webkitGetEntriesByType){return j.webkitGetEntriesByType("mark")}}}return a}return{mark:b,measure:l,gaMarks:a,gaMeasures:d}})();LUX.ns=(Date.now?Date.now():+(new Date()));LUX.ac=[];LUX.cmd=function(a){LUX.ac.push(a)};
		ftNextLoadScript('https://cdn.speedcurve.com/js/lux.js?id=13391102');
	{{/if}}

</script>
{{else}}
	<!-- always load the picturefill polyfill -->
	{{#if @root.polyfillUrls}}
		<script src="{{@root.polyfillUrls.core}}"></script>
	{{else}}
		<script src="https://next-geebee.ft.com/polyfill/v2/polyfill.min.js?features=HTMLPictureElement|always|gated"></script>
	{{/if}}
{{/if}}
