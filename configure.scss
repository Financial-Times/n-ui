@if variable-exists(_n-ui-features) {
	@error 'n-ui/configure must only be imported once';
}

$_n-ui-features: (
	ads: true,
	buttons: true,
	card: false,
	colors: null,
	cookieMessage: false,
	date: null,
	expander: false,
	footer: true,
	forms: false,
	grid: true,
	header: true,
	icons: null,
	messagePrompts: false,
	myft: false,
	normalize: null,
	notification: false,
	overlay: false,
	typography: true,
	utils: null,
	viewport: null,
	welcomeMessage: false
);

$_n-ui-presets: (
	discrete: map-merge($_n-ui-features, ()),
	complete: map-merge($_n-ui-features, (
		cookieMessage: true,
		messagePrompts: true,
		myft: true,
		notification: true,
		welcomeMessage: true
	))
);

$_n-ui-configured: false !default;

@mixin nUiConfigure($opts: ()) {
	@if $_n-ui-configured == true {
		@error 'nUiConfigure must only be called once';
	}

	$_n-ui-configured: true !global;

	@if map-has-key($opts, preset) {
		$preset: map-get($_n-ui-presets, map-get($opts, preset));
		$_n-ui-features: map-merge($_n-ui-features, $preset) !global;
		$opts: map-remove($opts, preset);
	}

	$_n-ui-features: map-merge($_n-ui-features, $opts) !global;

	/*! n-ui features: #{inspect($_n-ui-features)} */
}

@function nUiCriticalStart() {
  @if nUiHas('critical') {
    @return '! start:head.css ';
  }
  @return '';
}

@function nUiCriticalEnd() {
  @if nUiHas('critical') {
    @return '! end:head.css ';
  }
  @return '';
}

@function nUiHas($feature) {
  @return map-get($_n-ui-features, $feature) == true;
}
